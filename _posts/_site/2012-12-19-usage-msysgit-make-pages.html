<p><a href='http://code.google.com/p/msysgit'><img alt='msysgit-logo.png(PNG 图像,220x256 像素)' src='http://msysgit.github.com/img/msysgit-logo.png' /></a> 为杯具的 M$ 环境,一键式提供了 <code>git</code> 环境!</p>

<h2 id='_gitcafe__pages_'>那么如何使用 gitcafe 提供的 pages 服务?</h2>

<p>整体思路,参考:</p>

<ul>
<li><a href='http://blog.gitcafe.com/116.html'><span>2012/10/31</span>GitCafe正式推出Pages服务 | Blog – GitCafe</a></li>

<li><a href='https://help.github.com/articles/creating-project-pages-manually'>Creating Project Pages manually · github:help</a></li>
</ul>

<p>在 <code>Gitcafe</code> 中发布 <code>Pages</code> 也是同样的过程:</p>

<ul>
<li>注册帐号,部署 <code>SSH公匙</code> + 将帐号加入对应仓库的成员列表 - 当然,也可以走 <code>github</code> 倡议的 <code>Frok-&gt;code-&gt;Pull Requests-&gt;Pull+merged</code> 流程</li>

<li>在本地 <code>clone</code> 出仓库复本,进行写作 - <code>注意:</code> 必须在约定的 <code>gitcafe-pages</code> 分支中建立 <code>Jekll</code> 工程,才会被当成 <code>Pages</code> 业务被编译!</li>

<li>解决可能的冲突后,<code>push</code> 到 <code>Gitcafe</code> 完成自动编译,发布</li>
</ul>

<h3 id='id6'>强调一下思路</h3>

<ul>
<li><code>gitcafe-pages</code> 本质是在服务端的 <code>jekyll &lt;http://jekyllrb.com/&gt;</code>_ 服务 - 所以,我们在本地写文章时,只需要记住: - 所有文章组织在 <code>_posts</code> 目录中 - 使用的文件名格式为:</li>
</ul>
<div>
  <pre><code class='bash'>2012-12-19-usage-msysgit-make-pages.md
|   |  |    |                      +- 后綴名指使用 Markdown 语法的结构化纯文本
|   |  |    +- 以减号间隔开始的有意义的E文 文章名,将成为访问时的URL 一部分
|   |  +- 日期
|   +- 月份
+- 年份</code></pre>
</div>
<p>以及文本的前几行使用固定格式来声明一些文章信息:</p>
<div>
  <pre><code class='bash'>---
layout: post
title: 如何在M$系统中管理 Gitcafe 的Pages 内容发布?
description: ~ 基于 msysgit,在M$ 系统中使用Git 来管理 Gitcafe 的Pages 发布Blog! 
categories: Howto
tags:  git gitcafe pages
---

...正文</code></pre>
</div>
<p>具体说明:</p>

<p>1. <code>---</code> 约定控制标识符</p>

<ol>
<li><code>layout: </code> 指出使用哪个模板,不要修改!除非你知道怎么回事儿!</li>

<li><code>title: </code> 文章标题</li>

<li><code>description: </code> 简述,有的模板首页只有简述没有正文的,输出的就是这儿的文字</li>

<li><code>categories: </code> 分类标签,使用空格区分多个</li>

<li><code>tags: </code> 内容标签,使用空格区分多个 7. <code>---</code> 约定控制标识符 8. 最好有个空行同正文分开</li>
</ol>

<p><code>注意!!!</code> ~ 所有的配置声明格式为: <code>变量:</code>+空格+<code>配置内容</code> ,少了空格会引发各种问题的!</p>

<p>以上就是写文章所要知道的一切了,以下所有配置什么的, 99% 都是为了在 <code>M$</code> 中使用 <code>git</code> 而已&#8230;</p>

<ul>
<li>真实的 html 页面是在服务端生成到 <code>_site</code> 目录中的</li>

<li>大家在本地,反而不必要一定先生成 html 页面的</li>

<li>甚至于,一般使用 <code>.gitignore</code> 配置文件,强制 <code>git</code> 忽略 <code>_site</code> 目录的变化,不进行版本监控!</li>
</ul>

<h3 id='_msysgit_'>安装 msysgit 整备环境</h3>

<ul>
<li>下载: <a href='http://msysgit.googlecode.com/files/msysGit-netinstall-1.8.0-preview20121022.exe'>msysGit-netinstall-1.8.0-preview20121022.exe</a> - 参考: - <a href='http://www.starming.com/index.php?action=plugin&amp;v=wave&amp;tpl=union&amp;ac=viewgrouppost&amp;gid=32767&amp;tid=1000002148'>在windows安装配置Git开发环境</a> - <a href='http://drupalchina.cn/content/windows-xi-tong-xia-gitan-zhuang-tu-jie'>Windows 系统下Git安装图解 | Drupal中国</a></li>

<li><code>注意</code>: <code>...选择Git文件夹,右键,选择Git Bash Here,会弹出shell命令行界面</code> 可能不一定有</li>

<li>不过,可以自然的进入 msysgit 安装目录中, 点击 <code>git-cmd.bat</code> - 在其中调用 <code>bin</code> 下的 <code>bash.exe</code> 进入方便的 shell 环境 - 就可以自动的引用到 <code>ssh-kengen.exe</code> 生成对应的 <code>SSH</code> 密匙对!</li>
</ul>

<p><img alt='0-bash.png' src='/img/msysgit/0-bash.png' /></p>

<p>命令形如: <div>
  <pre><code class='bash'>bash-3.1$ ssh-keygen -C &quot;zhouqi@ijinshan.com&quot; 
Your identification has been saved in /c/Documents and Settings/Administrator/.s
sh/id_rsa.
Your public key has been saved in /c/Documents and Settings/Administrator/.ssh/i
d_rsa.pub.
The key fingerprint is:
cf:1b:90:1b:25:0a:12:61:ff:ad:71:d0:ec:cd:5f:55 zhouqi@ijinshan.com</code></pre>
</div></p>

<p>- 输出的提示中清晰的指出了生成的密匙对文件在哪个目录</p>

<ul>
<li>只是形式同平时 <code>cmd</code> 环境中的有点不同,少了恶心的 <code>:</code> 以及分隔线是 UNIX 形式的</li>

<li>所以, <code>/c/Documents and Settings/Administrator/.ssh</code></li>

<li>就是 <code>C:\Documents and Settings\Administrator\.ssh</code></li>

<li>从对应的文件中复制出公匙字串,这里是 <code>id_rsa.pub</code> 发布为个人帐号的公匙:</li>
</ul>

<p><img alt='00-cafe-pubkey' src='/img/sourcetree/00-cafe-pubkey.png' /></p>

<p>再由仓库管理员加 <code>gitcafe</code> 帐号为 <code>blogging</code> 仓库的协作人员:</p>

<p><img alt='04-cafe-team' src='/img/sourcetree/04-cafe-team.png' /></p>

<p>并在本地配置合理的全局变量: <div>
  <pre><code class='bash'>bash-3.1$ git config --global user.name &quot;zhouqi&quot;
bash-3.1$ git config --global user.email &quot;zhouqi@ijinshan.com&quot;</code></pre>
</div></p>

<p>可以使用git 命令观察是否生效: <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;div&gt;
  &lt;pre&gt;&lt;code class=&apos;bash&apos;&gt;bash-3.1$ git config --list</pre></p>

<h1 id='id7'>&#8230;</h1>

<p>http.sslcainfo=/mingw/bin/curl-ca-bundle.crt sendemail.smtpserver=/mingw/bin/msmtp.exe diff.astextplain.textconv=astextplain rebase.autosquash=true user.name=zhouqi user.email=zhouqi@ijinshan.com&lt;/code&gt;&lt;/pre&gt; &lt;/div&gt;</p>

<h3 id='_git_'>使用 git 命令初始化本地工作仓库</h3>

<p>从仓库首页可以获得有写入权限的 <code>URI</code>:</p>

<p><img alt='00-gituri.png' src='/img/sourcetree/00-gituri.png' /></p>

<p>在合适的空白目录中 <code>clone</code> 远程仓库到本地,并同时切换为指定的 <code>gitcafe-pages</code> 分支:</p>
<div>
  <pre><code class='bash'>bash-3.1$ pwd
/c/msysgit 

bash-3.1$ git clone  --branch gitcafe-pages git@gitcafe.com:Liebao/Liebao.git blog
Cloning into 'blog'...
The authenticity of host 'gitcafe.com (50.116.2.223)' can't be established.
RSA key fingerprint is 84:9e:c9:8e:7f:36:28:08:7e:13:bf:43:12:74:11:4e.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'gitcafe.com,50.116.2.223' (RSA) to the list of known
 hosts.
remote: Counting objects: 127, done.
remote: Compressing objects: 100% (122/122), done.
remote: Total 127 (delta 47), reused 0 (delta 0)
Receiving objects: 100% (127/127), 458.50 KiB | 377 KiB/s, done.
Resolving deltas: 100% (47/47), done.</code></pre>
</div>
<ul>
<li>参考: <a href='http://blog.gitcafe.com/116.html'><span>2012/10/31</span>GitCafe正式推出Pages服务</a></li>
</ul>

<p>在资源管理器中就可以见到整个基于 <a href='http://jekyllrb.com/'>jekyll</a> 的团队blog 工程了!</p>

<p><img alt='2-cloned.png' src='/img/msysgit/2-cloned.png' /></p>

<h4 id='id8'>推荐配置</h4>

<p>在 git 配置文件中声明有意义的别名:</p>

<p>修订 仓库目录中 .git/cofig 文件</p>

<ul>
<li>即,如果 <code>clone</code> 的仓库目录是 <code>C:\msysgit\blog</code></li>

<li>则,仓库配置文件就在 <code>C:\msysgit\blog\.git</code></li>
</ul>

<p>默认内容类似: <div>
  <pre><code class='ini'>[remote &quot;origin&quot;]
    url = git://gitcafe.com/Liebao/Liebao.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch &quot;master&quot;]
    remote = cafe
    merge = refs/heads/master</code></pre>
</div></p>

<p>追加一节: <div>
  <pre><code class='ini'>[remote &quot;cafe&quot;]
    url = git@gitcafe.com:Liebao/Liebao.git
    fetch = +refs/heads/*:refs/remotes/origin/*</code></pre>
</div></p>

<ul>
<li>以后就可以使用 <code>cafe</code> 来替代 <code>origin</code> 来指代当前仓库名了!</li>
</ul>

<p><img alt='1-config.png' src='/img/msysgit/1-config.png' /></p>

<h3 id='_markdownpad_'>使用 markdownpad 进行文章编辑</h3>

<ul>
<li>免费好编辑器! <a href='http://www.markdownpad.com/'>http://www.markdownpad.com/</a> - 下载,安装,没什么好说的</li>

<li>完全吻合 word 式编辑的环境! 左窗写 markdown,右窗自动编译成最终效果:</li>
</ul>

<p><img alt='3-markdownpad.png' src='/img/msysgit/3-markdownpad.png' /></p>

<p>编辑保存后,使用 <code>status</code> 可以观察到变化: <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;div&gt;
  &lt;pre&gt;&lt;code class=&apos;bash&apos;&gt;bash-3.1$ git status</pre></p>

<h1 id='on_branch_gitcafepages'>On branch gitcafe-pages</h1>

<h1 id='changes_not_staged_for_commit'>Changes not staged for commit:</h1>

<h1 id='use_git_add_file_to_update_what_will_be_committed'>(use &#34;git add &#60;file&#62;&#8230;&#34; to update what will be committed)</h1>

<h1 id='use_git_checkout__file_to_discard_changes_in_working_directory'>(use &#34;git checkout &#8211; &#60;file&#62;&#8230;&#34; to discard changes in working directory)</h1>

<p>#</p>

<h1 id='modified_posts20121210gitnotemd'>modified: <em>posts/2012-12-10-git-note.md</em></h1>

<p># no changes added to commit (use &#34;git add&#34; and/or &#34;git commit -a&#34;)&lt;/code&gt;&lt;/pre&gt; &lt;/div&gt;</p>

<p>使用 <code>add</code> 收录变更,才能 <code>commit</code>, 最后 <code>push</code> 后,才能发布到 <code>gitcafe</code> 的团队仓库: <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;div&gt;
  &lt;pre&gt;&lt;code class=&apos;bash&apos;&gt;bash-3.1$ git add . </pre></p>

<p>bash-3.1$ git commit -m &#34;zhouqi throught XP + msysgit&#34; <span>gitcafe-pages 6f50b04</span> zhouqi throught XP + msysgit 1 file changed, 4 insertions(+)</p>

<p>bash-3.1$ git push cafe warning: push.default is unset; its implicit value is changing in Git 2.0 from &#8216;matching&#8217; to &#8216;simple&#8217;. To squelch this message and maintain the current behavior after the default changes, use:</p>

<p>git config &#8211;global push.default matching</p>

<p>To squelch this message and adopt the new behavior now, use:</p>

<p>git config &#8211;global push.default simple</p>

<p>See &#8216;git help config&#8217; and search for &#8216;push.default&#8217; for further information. (the &#8216;simple&#8217; mode was introduced in Git 1.7.11. Use the similar mode &#8216;current&#8217; instead of &#8216;simple&#8217; if you sometimes use older versions of Git)</p>

<p>Counting objects: 7, done. Compressing objects: 100% (4/4), done. Writing objects: 100% (4/4), 426 bytes, done. Total 4 (delta 3), reused 0 (delta 0) To git@gitcafe.com:Liebao/Liebao.git 89db4d6..6f50b04 gitcafe-pages -&#62; gitcafe-pages&lt;/code&gt;&lt;/pre&gt; &lt;/div&gt;</p>

<ul>
<li><code>注意!</code> git 的提示非常智能,会好心提醒我们忘记的参数,不过,一般都是可以智能猜中我们的期待,完成合理的操作! <br />- 基于以上的操作,在远程仓库中就可以见到自个儿的提交了!</li>
</ul>

<p><img alt='11-cafe-same' src='/img/sourcetree/11-cafe-same.png' /></p>

<h4 id='_'>技巧: 图形化版本树!</h4>
<div>
  <pre><code class='bash'>bash-3.1$ git log --graph --pretty=oneline --abbrev-commit
* 59a267c 快速使用 README 教程M$+SourceTree 使用
*   3fa9827 Merge branch 'gitcafe-pages' of gitcafe.com:Liebao/Liebao into gitcafe-pages
|\  
| * 6f50b04 zhouqi throught XP + mysysgit
| * 89db4d6 使用协作人員的身份对仓库进行 add+ci
* | 2d7c376 before merge ci 先
|/  
* f20f7ef 根据协同过程,增补使用说明+++格式追加分层
* 7e9496e 根据协同过程,增补使用说明++
* 5f1e4bf 根据协同过程,增补使用说明
* 80846ab 演示多人协同时的流程+
*   e8b5e0f Merge branch 'gitcafe-pages' of gitcafe.com:Liebao/Liebao into gitcafe-pages
|\  
| * 9783bab 尝试另外成员本地的协同过程
* | ce33b2e 增补res 目录,准备发布可能的幻灯资料..
|/  
* 61f39ee 增补本地图片使用样例
...</code></pre>
</div>
<p>- 当有复杂的团队多人协作时,可以用来观察各种版本的合并关系 - 进一步的: - <a href='http://hisea.me/p/git-log-output-formats'>个性化你的Git Log的输出格式</a> - <a href='http://floss.zoomquiet.org/data/20120216152624/index.html'>pimping out git log - Bart&#8217;s Blog</a> - 等等分享经验基础上,可以定制出我们自个儿喜欢的文字式图树表达来,比如笔者在 <code>bash</code> 中的情景:</p>

<p><img alt='121219-git-ll' src='/img/121219-git-ll.png' /></p>

<h2 id='id9'>小结</h2>

<p>总之使用 <code>git+gitcafe pages</code> 在 <code>M$</code> 中的日常操作命令只有:</p>

<ol>
<li><code>git clone --branch gitcafe-pages ...</code></li>

<li><code>git add .</code></li>

<li><code>git commit -a -m &quot;注释&quot;</code></li>

<li><code>git push cafe gitcafe-pages</code></li>

<li><code>git pull cafe gitcafe-pages</code></li>
</ol>

<p>而基础协同流程就两种:</p>

<ul>
<li>第一次建立本地工作环境: <code>1-&gt;2-&gt;3-&gt;4</code></li>

<li>以后平时: <code>5-&gt;2-&gt;3-&gt;4</code> 的循环</li>
</ul>

<h2 id='id10'>参考</h2>

<ul>
<li>什么是 <code>SSH</code> ? ~ <a href='http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html'>SSH原理与运用(一):远程登录 - 阮一峰的网络日志</a></li>

<li>什么是 <a href='https://github.com/nvie/gitflow'>gitflow</a> - <a href='http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/'>Why aren&#8217;t you using git-flow? - Jeff Kreeftmeijer</a> - 中译:<a href='http://www.jeffkit.info/2010/12/860/'>你为神马不用git-flow呢? | Jeff的妙想奇境</a></li>
</ul>